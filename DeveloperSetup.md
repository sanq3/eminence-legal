# 開発者バッジの設定方法

## 初回セットアップ（自分に開発者バッジを付与）

### 方法1: Firebase Console（最も簡単）

1. **Firebase Console にログイン**
   - https://console.firebase.google.com/
   - プロジェクト「meigen-66989」を選択

2. **自分のユーザーIDを確認**
   - アプリの設定画面で @から始まる8文字のIDを確認
   - または Firebase Authentication でメールアドレスから確認

3. **開発者バッジを付与**
   - Firestore Database → `userProfiles` → あなたのユーザーID
   - `allBadges` フィールドに `"developer"` を追加
   ```
   allBadges: ["developer"]
   ```

4. **アプリを再起動**
   - バッジが反映されます
   - 管理者パネルが使えるようになります

### 方法2: 手動でFirebaseコンソールから設定

```javascript
// Firestoreのコンソールで直接編集
{
  "uid": "あなたのUID",
  "allBadges": ["developer"],  // これを追加
  "displayName": "あなたの名前",
  "bio": "",
  "profileImageURL": "",
  "createdAt": Timestamp,
  "updatedAt": Timestamp
}
```

## 開発者バッジを持つと使える機能

### 管理者パネル
- 設定画面のバージョン番号を**10回タップ**
- 管理者パネルが開く
- 他のユーザーにバッジを付与・削除できる

### バッジ付与の方法
1. 管理者パネルを開く
2. @ユーザー名を入力（@は自動で付くので入力不要）
3. バッジを選択：
   - **開発者**: アプリ開発者（紫のハンマーアイコン）
   - **認証済み**: 公式認証（青のチェックマーク）
4. 「バッジを付与」をタップ

### ユーザー検索の仕組み
- ユーザーIDの最初の8文字で検索
- または設定した表示名で検索
- @は自動で除去される

## 重要な仕様

### 権限の階層
```
開発者バッジ保持者
  ├── 管理者パネルへのアクセス
  ├── 他ユーザーへのバッジ付与
  └── バッジの削除権限
```

### バッジの種類と意味
| バッジ | アイコン | 色 | 意味 |
|--------|----------|-----|------|
| developer | hammer.fill | 紫 | アプリ開発者 |
| verified | checkmark.seal.fill | 青 | 公式認証アカウント |

## トラブルシューティング

### 管理者パネルが表示されない
1. 開発者バッジが正しく付与されているか確認
2. アプリを完全に終了して再起動
3. Firebase Consoleで `allBadges` に `"developer"` が含まれているか確認

### ユーザーが見つからない
1. @の後の文字列が正しいか確認
2. そのユーザーがログインしたことがあるか確認
3. Firebase Consoleで直接ユーザーIDを確認

### バッジが反映されない
1. 対象ユーザーがアプリを再起動
2. プロフィール画面を下に引っ張って更新
3. ログアウト→ログインし直す

## セキュリティ

- 開発者バッジを持つユーザーのみが管理者パネルにアクセス可能
- バッジの付与・削除はFirestoreのセキュリティルールで保護
- 不正なアクセスは自動的にブロック