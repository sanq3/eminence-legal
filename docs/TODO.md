# TODO（短期・中期の作業計画）

## 今回実装した機能
- [x] ホーム画面のUI修正
  - [x] リストの `>` マークを非表示に
  - [x] 作者名をカードの右下に再配置
- [x] リプライ機能を匿名化（名前入力欄を削除）
- [x] いいねボタンのデザインをシンプル化
- [x] 日付表示を日本語書式（日付と時間）に統一
- [x] リプライ機能に絵文字リアクションを追加
## 今回実装した機能
- [x] ホーム画面のUI修正
  - [x] リストの `>` マークを非表示に
  - [x] 作者名をカードの右下に再配置
- [x] リプライ機能を匿名化（名前入力欄を削除）
- [x] いいねボタンのデザインをシンプル化
- [x] 日付表示を日本語書式（日付と時間）に統一
- [x] リプライ機能に絵文字リアクションを追加
- [x] ホーム画面の作者名を `— 名前 —` 形式に変更
- [x] 詳細画面にリプライ数とブックマーク機能を追加
- [x] 詳細画面のボタンを「リプライ数・いいね数・ブックマーク」の順に変更
- [x] 詳細画面の「リプライ」見出しを削除
- [x] ホーム画面の作者名フォントをセリフ体に変更
- [x] ホーム画面の名言を中央揃えに変更

## 今日の優先タスク（Short-term）

- [ ] **リプライ数の非正規化対応（Cloud Functions連携）**
  - [ ] `Quote`モデルに`replyCount`を追加
  - [ ] ホーム画面で`replyCount`を直接表示
  - [ ] Cloud Functions（ユーザー作業）のコードサンプル提供
- [ ] 例外時の UI 表示の見直し（`errorMessage` の出し分け）
- [ ] `ContentView` のリストセルで長文時のレイアウト最適化（改行・行間）
- [ ] Firestore 書き込みエラー時のリトライ導線（軽い Snackbar 相当）
- [ ] 匿名ログイン（Firebase Anonymous Auth）を「自動で」付与して端末を識別する - ユーザーはログイン操作なし＝体験は未ログインと同じ - 端末ごとに UID が発行され、投稿の所有権/編集権や集計が可能に - 将来 Sign in with Apple/Google へ「連携（アップグレード）」できる土台
- [x] 詳細画面にリプライ数とブックマーク機能を追加

## 今日の優先タスク（Short-term）

- [ ] 詳細画面のボタンを「リプライ数・いいね数・ブックマーク」の順に変更
- [ ] 詳細画面の「リプライ」見出しを削除
- [ ] ホーム画面の作者名フォントをセリフ体に変更
- [ ] ホーム画面の名言を中央揃えに変更
- [ ] ホーム画面にリプライ数・いいね数・ブックマークボタンを表示
- [ ] 例外時の UI 表示の見直し（`errorMessage` の出し分け）
- [ ] `ContentView` のリストセルで長文時のレイアウト最適化（改行・行間）
- [ ] Firestore 書き込みエラー時のリトライ導線（軽い Snackbar 相当）
- [ ] 匿名ログイン（Firebase Anonymous Auth）を「自動で」付与して端末を識別する - ユーザーはログイン操作なし＝体験は未ログインと同じ - 端末ごとに UID が発行され、投稿の所有権/編集権や集計が可能に - 将来 Sign in with Apple/Google へ「連携（アップグレード）」できる土台

## 直近の改善（Near-term）

- [ ] 編集ダイアログのバリデーション強化（空白のみ禁止、作者名の trim）
- [ ] 検索 UX 改善（検索中インジケータ、キャンセル導線）
- [ ] いいねの連打ガード（連打による多重更新の防止）

## 中期（Backlog）

- [ ] 匿名/Apple でのサインイン導入（投稿者識別）
- [ ] 自分の投稿のみ編集/削除可に制御（UID 紐付け、セキュリティルール）
- [ ] ページング（limit/offset or cursor）とサーバーサイド検索の検討
- [ ] `createdAt` のサーバータイムスタンプ化（整合性担保）

## ルール/運用

- 本 TODO は開発の「単一の真実源」。CLI/AI は本ファイルの範囲から逸脱しない。
- 大きな仕様追加はまずここへ追記し、実装は人間が明示許可してから。

### メモ（匿名ログインの狙いと効果）

- ログイン画面なしで端末ごとに UID を持てるため、初心者でも導入しやすい
- バッジ機能（累計いいね、連続投稿、ロール）を UID ベースで集計できる
- 不正対策（同一端末の連打検知など）の基礎になる
